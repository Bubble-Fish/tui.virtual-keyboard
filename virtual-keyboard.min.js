/*!Component-VirtualKeyboard v1.0.0 | NHN Entertainment*/
!function(){ne.component||(ne.component={}),ne.component.VirtualKeyboard=ne.util.defineClass({_template:{key:'<li><button type="button" value="{KEY}">{KEY}</button></li>',blank:"<li></li>"},_fixedKeys:{},_rawKeys:[],_identifiedRawKeys:[],_keyMap:{},_keySequences:[],_callback:{},_currentKeyType:null,_isEnglish:!1,_isSymbol:!1,_isCapsLock:!1,_documentFragment:null,init:function(a){this._initVariables(a||{}),this._arrangeKeySequence(),this._refineKeyMap(),this._initKeyboard(a.container),this._attachEvent()},_initVariables:function(a){this._currentKeyType=a.keyType||"english",this._fixedKeys=a.functions||{},this._rawKeys=this._copyArray(a.keys),this._template=ne.util.extend(this._template,a.template),this._callback=a.callback||{},this._documentFragment=document.createDocumentFragment()},_attachEvent:function(){var a="createTouch"in document||"ontouchstart"in document,b=a?"touchstart":"click";this._$container.on(b,$.proxy(this._pressKeyHandler,this))},_pressKeyHandler:function(a){var b,c,d,e=this._getTargetButton(a.target);return ne.util.isExisty(e)?(b=$(e).text(),c=this._keyMap[b].rawIndex,d=this._getKeyGroup(b),void("key"===d?this._excuteCallback(d,c):(this[b](),this._excuteCallback(b)))):!1},_getTargetButton:function(a){return"BUTTON"===a.tagName.toUpperCase()?a:$(a).parent("button")[0]},_arrangeKeySequence:function(){var a;a=this._sortFixedKeys(),this._identifyRawKeys(),this._copyArray(this._identifiedRawKeys,this._keySequences),ne.util.forEach(a,function(a){ne.util.isExisty(a)&&this._keySequences.splice(this._fixedKeys[a],0,a)},this)},_identifyRawKeys:function(){var a=0;ne.util.forEach(this._rawKeys,function(b,c){"blank"===this._getKeyGroup(b)&&(b="blank"+a,a++),this._identifiedRawKeys[c]=b},this)},_copyArray:function(a,b){return ne.util.isExisty(a)?(ne.util.isArray(a)||(a=[a]),ne.util.isExisty(b)&&ne.util.isArray(b)||(b=[]),ne.util.forEach(a,function(a,c){b[c]=a},this),b):!1},_sortFixedKeys:function(){var a;return this._keySequences.length=0,a=ne.util.keys(this._fixedKeys)||[],a.sort($.proxy(function(a,b){return this._fixedKeys[a]-this._fixedKeys[b]},this)),a},_refineKeyMap:function(){this._refineFixedKeys(),this._refineFloatingKeys()},_refineFixedKeys:function(){ne.util.forEach(this._fixedKeys,function(a,b){this._keyMap[b]={key:b,rawIndex:null,positionIndex:a,keyGroup:this._getKeyGroup(b)}},this)},_refineFloatingKeys:function(){ne.util.forEach(this._identifiedRawKeys,function(a,b){ne.util.isExisty(this._keyMap[a])?this._keyMap[a].positionIndex=this._getPositionIndex(a):this._keyMap[a]={key:a,rawIndex:b,positionIndex:this._getPositionIndex(a),keyGroup:this._getKeyGroup(this._rawKeys[b])}},this)},_getKeyGroup:function(a){var b;return b=ne.util.isExisty(this._fixedKeys[a])?"function":""===a?"blank":"key"},_getPositionIndex:function(a){for(var b=0,c=this._keySequences.length;c>b;b++)if(a===this._keySequences[b])return b},_initKeyboard:function(a){this._initContainer(a),this._arrangeKeys()},_initContainer:function(a){this._$container?ne.util.forEach(this._identifiedRawKeys,function(a){this._documentFragment.appendChild(this._keyMap[a].element)},this):(this._$container=$("#"+a),ne.util.isHTMLTag(this._$container[0])||(this._$container=this._createContainer()))},_createContainer:function(){var a="vk-"+this._getTime(),b=$("<ul id="+a+">");return $(document.body).append(b),b},_getTime:function(){var a;return Date.now&&(a=Date.now()||(new Date).getTime()),a},_arrangeKeys:function(){var a;ne.util.forEach(this._keySequences,function(b){a=this._keyMap[b].element,ne.util.isHTMLTag(a)||(this._keyMap[b].element=a=this._createKeyElement(b)),this._$container.append(a)},this)},_getTemplate:function(a,b){var c;return c="blank"===a?this._template.blank:this._template[b]||this._template.key,ne.util.isExisty(b)&&(c=c.replace(/{KEY}/g,b)),c},_createKeyElement:function(a){var b=this._keyMap[a].keyGroup,c=this._getTemplate(b,a),d=$(c),e=d.find("button");return!e.val()&&ne.util.isExisty(a)&&e.val(a),d[0]},_reArrangeKeys:function(a){this._rawKeys.length=0,this._keySequences.length=0,this._copyArray(a,this._rawKeys),this._arrangeKeySequence(),this._refineFloatingKeys(),this._arrangeKeys()},_excuteCallback:function(a,b){ne.util.isExisty(this._callback,a)&&ne.util.isFunction(this._callback[a])&&this._callback[a](b)},_getRawKeys:function(a){var b;ne.util.isExisty(this._callback,"getKeys")&&ne.util.isFunction(this._callback.getKeys)&&(b=a?this._callback.getKeys(this._currentKeyType,this._isCapsLock,!0):this._callback.getKeys(this._currentKeyType,this._isCapsLock)),ne.util.isArray(b)&&this._reArrangeKeys(b)},shuffle:function(){this._keySequences.length=0,this._initContainer(),this._getRawKeys()},language:function(){this._initContainer(),this._isEnglish=!this._isEnglish,this._currentKeyType=this._isEnglish?"english":"korean",this._getRawKeys()},caps:function(){this._initContainer(),this._isCapsLock=!this._isCapsLock,this._getRawKeys(!0)},symbol:function(){this._initContainer(),this._isSymbol=!this._isSymbol,this._currentKeyType=this._isSymbol?"symbol":"number",this._getRawKeys()},remove:function(){},clear:function(){},space:function(){},open:function(){this.shuffle(),this._$container.show()},close:function(){this.clear(),this._$container.hide()},done:function(){this.close()}})}();
//# sourceMappingURL=virtual-keyboard.min.map