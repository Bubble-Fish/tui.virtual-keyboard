/**
 * tui-component-virtual-keyboard
 * @author NHN Ent. FE Dev Lab <dl_javascript@nhnent.com>
 * @version v1.1.0
 * @license MIT
 */
!function t(e,i,n){function s(r,u){if(!i[r]){if(!e[r]){var o="function"==typeof require&&require;if(!u&&o)return o(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return s(i?i:t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){tui.util.defineNamespace("tui.component",{VirtualKeyboard:t("./src/js/virtualKeyboard.js")})},{"./src/js/virtualKeyboard.js":2}],2:[function(t,e,i){var n=tui.util.defineClass({init:function(t){this._initVariables(t||{}),this._arrangeKeySequence(),this._refineKeyMap(),this._initKeyboard(t.container),this._attachEvent(t.isClickOnly)},_template:{key:'<li><button type="button" value="{KEY}">{KEY}</button></li>',blank:"<li></li>"},_fixedKeys:{},_rawKeys:[],_identifiedRawKeys:[],_keyMap:{},_keySequences:[],_callback:{},_currentKeyType:null,_isEnglish:!1,_isSymbol:!1,_isCapsLock:!1,_documentFragment:null,_initVariables:function(t){this._currentKeyType=t.keyType||"english",this._fixedKeys=t.functions||{},this._rawKeys=this._copyArray(t.keys),this._template=tui.util.extend(this._template,t.template),this._callback=t.callback||{},this._documentFragment=document.createDocumentFragment()},_attachEvent:function(t){var e=!t&&("createTouch"in document||"ontouchstart"in document),i=e?"touchstart":"click";this._$container.on(i,$.proxy(this._pressKeyHandler,this))},_pressKeyHandler:function(t){var e,i,n,s=this._getTargetButton(t.target);return!!tui.util.isExisty(s)&&(e=s.value,i=this._getKeyGroup(e),n=this._keyMap[e].rawIndex,void("key"===i?this._executeCallback(i,n):(this[e](),this._executeCallback(e))))},_getTargetButton:function(t){return"BUTTON"===t.tagName.toUpperCase()?t:$(t).parent("button")[0]},_arrangeKeySequence:function(){var t;t=this._sortFixedKeys(),this._identifyRawKeys(),this._copyArray(this._identifiedRawKeys,this._keySequences),tui.util.forEach(t,function(t,e){tui.util.isExisty(t)&&this._keySequences.splice(this._fixedKeys[t],0,t)},this)},_identifyRawKeys:function(){var t=0;tui.util.forEach(this._rawKeys,function(e,i){"blank"===this._getKeyGroup(e)&&(e="blank"+t,t++),this._identifiedRawKeys[i]=e},this)},_copyArray:function(t,e){return!!tui.util.isExisty(t)&&(tui.util.isArray(t)||(t=[t]),tui.util.isExisty(e)&&tui.util.isArray(e)||(e=[]),tui.util.forEach(t,function(t,i){e[i]=t},this),e)},_sortFixedKeys:function(){var t;return this._keySequences.length=0,t=tui.util.keys(this._fixedKeys)||[],t.sort($.proxy(function(t,e){return this._fixedKeys[t]-this._fixedKeys[e]},this)),t},_refineKeyMap:function(){this._refineFixedKeys(),this._refineFloatingKeys()},_refineFixedKeys:function(){tui.util.forEach(this._fixedKeys,function(t,e){this._keyMap[e]={key:e,rawIndex:null,positionIndex:t,keyGroup:this._getKeyGroup(e)}},this)},_refineFloatingKeys:function(){tui.util.forEach(this._identifiedRawKeys,function(t,e){tui.util.isExisty(this._keyMap[t])?(this._keyMap[t].positionIndex=this._getPositionIndex(t),this._keyMap[t].rawIndex=e):this._keyMap[t]={key:t,rawIndex:e,positionIndex:this._getPositionIndex(t),keyGroup:this._getKeyGroup(this._rawKeys[e])}},this)},_getKeyGroup:function(t){var e;return e=tui.util.isExisty(this._fixedKeys[t])?"function":""===t?"blank":"key"},_getPositionIndex:function(t){for(var e=0,i=this._keySequences.length;e<i;e++)if(t===this._keySequences[e])return e},_initKeyboard:function(t){this._initContainer(t),this._arrangeKeys()},_initContainer:function(t){this._$container?tui.util.forEach(this._identifiedRawKeys,function(t){this._documentFragment.appendChild(this._keyMap[t].element)},this):(this._$container=$("#"+t),tui.util.isHTMLTag(this._$container[0])||(this._$container=this._createContainer()))},_createContainer:function(){var t="vk-"+this._getTime(),e=$("<ul id="+t+">");return $(document.body).append(e),e},_getTime:function(){var t;return Date.now&&(t=Date.now()||(new Date).getTime()),t},_arrangeKeys:function(){var t;tui.util.forEach(this._keySequences,function(e){t=this._keyMap[e].element,tui.util.isHTMLTag(t)||(this._keyMap[e].element=t=this._createKeyElement(e)),this._$container.append(t)},this)},_getTemplate:function(t,e){var i;return i="blank"===t?this._template.blank:this._template[e]||this._template.key,tui.util.isExisty(e)&&(i=i.replace(/{KEY}/g,e)),i},_createKeyElement:function(t){var e=this._keyMap[t].keyGroup,i=this._getTemplate(e,t),n=$(i),s=n.find("button");return!s.val()&&tui.util.isExisty(t)&&s.val(t),n[0]},_reArrangeKeys:function(t){this._rawKeys.length=0,this._keySequences.length=0,this._copyArray(t,this._rawKeys),this._arrangeKeySequence(),this._refineFloatingKeys(),this._arrangeKeys()},_executeCallback:function(t,e){tui.util.isExisty(this._callback,t)&&tui.util.isFunction(this._callback[t])&&this._callback[t](e)},_getRawKeys:function(t){var e;tui.util.isExisty(this._callback,"getKeys")&&tui.util.isFunction(this._callback.getKeys)&&(e=t?this._callback.getKeys(this._currentKeyType,this._isCapsLock,!0):this._callback.getKeys(this._currentKeyType,this._isCapsLock)),tui.util.isArray(e)&&this._reArrangeKeys(e)},shuffle:function(){this._keySequences.length=0,this._initContainer(),this._getRawKeys()},language:function(){this._initContainer(),this._isEnglish=!this._isEnglish,this._currentKeyType=this._isEnglish?"english":"korean",this._getRawKeys()},caps:function(){this._initContainer(),this._isCapsLock=!this._isCapsLock,this._getRawKeys(!0)},symbol:function(){this._initContainer(),this._isSymbol=!this._isSymbol,this._currentKeyType=this._isSymbol?"symbol":"number",this._getRawKeys()},remove:function(){},clear:function(){},space:function(){},open:function(){this.shuffle(),this._$container.show()},close:function(){this.clear(),this._$container.hide()},done:function(){this.close()}});e.exports=n},{}]},{},[1]);